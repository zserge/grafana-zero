(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9848],{"./public/app/core/components/NodeGraphSettings.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>l});a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js");var n,s=a("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/0/cache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-data/src/index.ts"),o=a("./packages/grafana-ui/src/index.ts"),i=a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");function l(e){var t;let{options:a,onOptionsChange:s}=e;const l=(0,o.useStyles)(c);return(0,i.jsxs)("div",{className:l.container,children:[n||(n=(0,i.jsx)("h3",{className:"page-heading",children:"Node Graph"})),(0,i.jsx)(o.InlineFieldRow,{className:l.row,children:(0,i.jsx)(o.InlineField,{tooltip:"Enables the Node Graph visualization in the trace viewer.",label:"Enable Node Graph",labelWidth:26,children:(0,i.jsx)(o.InlineSwitch,{value:null===(t=a.jsonData.nodeGraph)||void 0===t?void 0:t.enabled,onChange:e=>(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:s,options:a},"nodeGraph",Object.assign({},a.jsonData.nodeGraph,{enabled:e.currentTarget.checked}))})})})]})}const c=e=>({container:s.css`
    label: container;
    width: 100%;
  `,row:s.css`
    label: row;
    align-items: baseline;
  `})},"./public/app/core/components/TraceToLogsSettings.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n,s=a("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/0/cache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-data/src/index.ts"),o=a("./packages/grafana-runtime/src/index.ts"),i=a("./packages/grafana-ui/src/index.ts"),l=(a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js"));function c(e){var t,a,c,u,p,m,h;let{options:g,onOptionsChange:f}=e;const b=(0,i.useStyles)(d);return(0,l.jsxs)("div",{className:(0,s.css)({width:"100%"}),children:[n||(n=(0,l.jsx)("h3",{className:"page-heading",children:"Trace to logs"})),(0,l.jsx)("div",{className:b.infoText,children:"Trace to logs let's you navigate from a trace span to the selected data source's log."}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,l.jsx)(o.DataSourcePicker,{pluginId:"loki",current:null===(t=g.jsonData.tracesToLogs)||void 0===t?void 0:t.datasourceUid,noDefault:!0,width:40,onChange:e=>{var t;return(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",{datasourceUid:e.uid,tags:null===(t=g.jsonData.tracesToLogs)||void 0===t?void 0:t.tags})}})})}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,l.jsx)(i.TagsInput,{tags:null===(a=g.jsonData.tracesToLogs)||void 0===a?void 0:a.tags,width:40,onChange:e=>{var t;return(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",{datasourceUid:null===(t=g.jsonData.tracesToLogs)||void 0===t?void 0:t.datasourceUid,tags:e})}})})}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{label:"Span start time shift",labelWidth:26,grow:!0,tooltip:"Shifts the start time of the span. Default 0 (Time units can be used here, for example: 5s, 1m, 3h)",children:(0,l.jsx)(i.Input,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",Object.assign({},g.jsonData.tracesToLogs,{spanStartTimeShift:e.currentTarget.value})),value:(null===(c=g.jsonData.tracesToLogs)||void 0===c?void 0:c.spanStartTimeShift)||""})})}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{label:"Span end time shift",labelWidth:26,grow:!0,tooltip:"Shifts the end time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h",children:(0,l.jsx)(i.Input,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",Object.assign({},g.jsonData.tracesToLogs,{spanEndTimeShift:e.currentTarget.value})),value:(null===(u=g.jsonData.tracesToLogs)||void 0===u?void 0:u.spanEndTimeShift)||""})})}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{label:"Filter by Trace ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Trace ID. Appends '|=<trace id>' to the query.",children:(0,l.jsx)(i.InlineSwitch,{value:null===(p=g.jsonData.tracesToLogs)||void 0===p?void 0:p.filterByTraceID,onChange:e=>(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",Object.assign({},g.jsonData.tracesToLogs,{filterByTraceID:e.currentTarget.checked}))})})}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{label:"Filter by Span ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Span ID. Appends '|=<span id>' to the query.",children:(0,l.jsx)(i.InlineSwitch,{value:null===(m=g.jsonData.tracesToLogs)||void 0===m?void 0:m.filterBySpanID,onChange:e=>(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",Object.assign({},g.jsonData.tracesToLogs,{filterBySpanID:e.currentTarget.checked}))})})}),(0,l.jsx)(i.InlineFieldRow,{children:(0,l.jsx)(i.InlineField,{label:"Loki Search",labelWidth:26,grow:!0,tooltip:"Use this logs data source to search for traces.",children:(0,l.jsx)(i.InlineSwitch,{defaultChecked:!0,value:null===(h=g.jsonData.tracesToLogs)||void 0===h?void 0:h.lokiSearch,onChange:e=>(0,r.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:g},"tracesToLogs",Object.assign({},g.jsonData.tracesToLogs,{lokiSearch:e.currentTarget.checked}))})})})]})}const d=e=>({infoText:s.css`
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `})},"./public/app/core/utils/tracing.ts":(e,t,a)=>{"use strict";a.d(t,{et:()=>s,nO:()=>r,fy:()=>o,np:()=>l});var n=a("./packages/grafana-data/src/index.ts");function s(e){e.sort(((e,t)=>e[0]-t[0]));return e.reduce(((e,t)=>{if(!e.length)return[t];const a=e.slice(-1)[0],[n,s]=a,[r,o]=t;return o<s?e:r>s?[...e,t]:[...e.slice(0,-1),[n,o]]}),[]).reduce(((e,t)=>e+(t[1]-t[0])),0)}function r(e){const t={};let a;for(let n=0;a=e(n),a;n++){t[a.id]?t[a.id].span=a.span:t[a.id]={span:a.span,children:[]};for(const e of a.parentIds)e&&(t[e]?t[e].children.push(a.id):t[e]={span:void 0,children:[a.id]})}return t}function o(e,t,a){return{main:`${i(e)}ms (${i(e/t*100)}%)`,secondary:`${i(a)}ms (${i(a/e*100)}%)`}}function i(e){return parseFloat(e.toFixed(2))}function l(){return[new n.MutableDataFrame({fields:[{name:n.NodeGraphDataFrameFieldNames.id,type:n.FieldType.string},{name:n.NodeGraphDataFrameFieldNames.title,type:n.FieldType.string},{name:n.NodeGraphDataFrameFieldNames.subTitle,type:n.FieldType.string},{name:n.NodeGraphDataFrameFieldNames.mainStat,type:n.FieldType.string,config:{displayName:"Total time (% of trace)"}},{name:n.NodeGraphDataFrameFieldNames.secondaryStat,type:n.FieldType.string,config:{displayName:"Self time (% of total)"}},{name:n.NodeGraphDataFrameFieldNames.color,type:n.FieldType.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),new n.MutableDataFrame({fields:[{name:n.NodeGraphDataFrameFieldNames.id,type:n.FieldType.string},{name:n.NodeGraphDataFrameFieldNames.target,type:n.FieldType.string},{name:n.NodeGraphDataFrameFieldNames.source,type:n.FieldType.string}],meta:{preferredVisualisationType:"nodeGraph"}})]}},"./public/app/plugins/datasource/jaeger/module.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{plugin:()=>k});var n=a("./packages/grafana-data/src/index.ts"),s=a("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./.yarn/cache/rxjs-npm-7.3.0-8a14d1c3d9-e63adb8808.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),o=a("./.yarn/cache/rxjs-npm-7.3.0-8a14d1c3d9-e63adb8808.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),i=a("./.yarn/cache/rxjs-npm-7.3.0-8a14d1c3d9-e63adb8808.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),l=a("./.yarn/cache/rxjs-npm-7.3.0-8a14d1c3d9-e63adb8808.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),c=a("./packages/grafana-runtime/src/index.ts"),d=a("./public/app/core/utils/fetch.ts"),u=a("./public/app/features/dashboard/services/TimeSrv.ts"),p=a("./public/app/plugins/datasource/jaeger/responseTransform.ts"),m=a("./public/app/core/utils/tracing.ts");function h(e){const{nodes:t,edges:a}=function(e){const t=[],a=[],s=function(e){let t=0,a=1/0;for(const n of e)n.startTime<a&&(a=n.startTime),n.startTime+n.duration>t&&(t=n.startTime+n.duration);return t-a}(e.spans),r=(0,m.nO)((t=>{var a;if(t>=e.spans.length)return;const n=e.spans[t];return{span:n,id:n.spanID,parentIds:(null===(a=n.references)||void 0===a?void 0:a.filter((e=>"CHILD_OF"===e.refType)).map((e=>e.spanID)))||[]}}));for(const c of e.spans){var o,i,l;const d=e.processes[c.processID],u=r[c.spanID].children.map((e=>{const t=r[e].span;return[t.startTime,t.startTime+t.duration]})),p=(0,m.et)(u),h=c.duration-p,g=(0,m.fy)(c.duration/1e3,s/1e3,h/1e3);t.push({[n.NodeGraphDataFrameFieldNames.id]:c.spanID,[n.NodeGraphDataFrameFieldNames.title]:null!==(o=null==d?void 0:d.serviceName)&&void 0!==o?o:"",[n.NodeGraphDataFrameFieldNames.subTitle]:c.operationName,[n.NodeGraphDataFrameFieldNames.mainStat]:g.main,[n.NodeGraphDataFrameFieldNames.secondaryStat]:g.secondary,[n.NodeGraphDataFrameFieldNames.color]:h/s});const f=null===(i=c.references)||void 0===i||null===(l=i.find((e=>"CHILD_OF"===e.refType)))||void 0===l?void 0:l.spanID;f&&r[f].span&&a.push({[n.NodeGraphDataFrameFieldNames.id]:f+"--"+c.spanID,[n.NodeGraphDataFrameFieldNames.target]:c.spanID,[n.NodeGraphDataFrameFieldNames.source]:f})}return{nodes:t,edges:a}}(e),[s,r]=(0,m.np)();for(const e of t)s.add(e);for(const e of a)r.add(e);return[s,r]}var g=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/logfmt.js"),f=a.n(g);function b(e){if(!e)return"";const t=f().parse(e);return Object.keys(t).forEach((e=>{const a=t[e];"string"!=typeof a&&(t[e]=String(a))})),JSON.stringify(t)}function v(e){if(!e)return"";try{return f().stringify(JSON.parse(e))}catch{return e}}var y=a("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/0/cache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),j=a("./packages/grafana-ui/src/index.ts"),x=a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),D=a("./.yarn/__virtual__/react-transition-group-virtual-08a7713bd0/0/cache/react-transition-group-npm-4.4.1-5b62a122ef-0bcd8af483.zip/node_modules/react-transition-group/esm/CSSTransition.js"),T=a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const F="e.g. 1.2s, 100ms, 500us";function _(e){let{query:t,onChange:a}=e;const[n,s]=(0,x.useState)(!1),r=(0,j.useStyles)(w);return(0,T.jsxs)("div",{children:[(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)("div",{className:r.advancedOptionsContainer,onClick:()=>s(!n),children:(0,T.jsxs)(j.InlineLabel,{as:"div",children:["Advanced options"," ",(0,T.jsx)(j.Icon,{className:n?r.angleUp:r.angleDown,name:"angle-down"})]})})}),(0,T.jsx)(D.Z,{in:n,mountOnEnter:!0,unmountOnExit:!0,timeout:300,classNames:r,children:(0,T.jsxs)("div",{children:[(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Min Duration",labelWidth:21,grow:!0,children:(0,T.jsx)(j.Input,{value:t.minDuration||"",placeholder:F,onChange:e=>a(Object.assign({},t,{minDuration:e.currentTarget.value}))})})}),(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Max Duration",labelWidth:21,grow:!0,children:(0,T.jsx)(j.Input,{value:t.maxDuration||"",placeholder:F,onChange:e=>a(Object.assign({},t,{maxDuration:e.currentTarget.value}))})})}),(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Limit",labelWidth:21,grow:!0,tooltip:"Maximum numbers of returned results",children:(0,T.jsx)(j.Input,{value:t.limit||"",type:"number",onChange:e=>a(Object.assign({},t,{limit:e.currentTarget.value?parseInt(e.currentTarget.value,10):void 0}))})})})]})})]})}function w(e){return{advancedOptionsContainer:y.css`
      margin: 0 ${e.spacing.xs} ${e.spacing.xs} 0;
      width: 100%;
      cursor: pointer;
    `,enter:y.css`
      label: enter;
      height: 0;
      opacity: 0;
    `,enterActive:y.css`
      label: enterActive;
      height: 108px;
      opacity: 1;
      transition: height 300ms ease, opacity 300ms ease;
    `,exit:y.css`
      label: exit;
      height: 108px;
      opacity: 1;
    `,exitActive:y.css`
      label: exitActive;
      height: 0;
      opacity: 0;
      transition: height 300ms ease, opacity 300ms ease;
    `,angleUp:y.css`
      transform: rotate(-180deg);
      transition: transform 300ms;
    `,angleDown:y.css`
      transform: rotate(0deg);
      transition: transform 300ms;
    `}}const S={label:"All",value:void 0};function C(e){let{datasource:t,query:a,onChange:n}=e;const[s,r]=(0,x.useState)(),[o,i]=(0,x.useState)();return(0,x.useEffect)((()=>{(async()=>{const e=await N({dataSource:t,url:"/api/services",notFoundLabel:"No service found"});r(e)})()}),[t]),(0,x.useEffect)((()=>{a.service&&(async()=>{const e=await N({dataSource:t,url:`/api/services/${encodeURIComponent(a.service)}/operations`,notFoundLabel:"No operation found"});i([S,...e])})()}),[t,a.service]),(0,T.jsxs)("div",{className:(0,y.css)({maxWidth:"500px"}),children:[(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Service",labelWidth:14,grow:!0,children:(0,T.jsx)(j.Select,{menuShouldPortal:!0,options:s,value:(null==s?void 0:s.find((e=>e.value===a.service)))||null,onChange:e=>{n(Object.assign({},a,{service:e.value,operation:a.service!==e.value?void 0:a.operation}))},menuPlacement:"bottom",isClearable:!0})})}),(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Operation",labelWidth:14,grow:!0,disabled:!a.service,children:(0,T.jsx)(j.Select,{menuShouldPortal:!0,options:o,value:(null==o?void 0:o.find((e=>e.value===a.operation)))||null,onChange:e=>n(Object.assign({},a,{operation:e.value})),menuPlacement:"bottom",isClearable:!0})})}),(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Tags",labelWidth:14,grow:!0,children:(0,T.jsx)(j.Input,{value:v(a.tags),placeholder:"http.status_code=200 error=true",onChange:e=>n(Object.assign({},a,{tags:e.currentTarget.value}))})})}),(0,T.jsx)(_,{query:a,onChange:n})]})}const N=async e=>{let{dataSource:t,url:a,notFoundLabel:n}=e;const s=await t.metadataRequest(a);if(!s)return[{label:n,value:n}];return s.sort().map((e=>({label:e,value:e})))};function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O extends n.DataSourceApi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,u.$t)();super(e),I(this,"uploadedJson",null),I(this,"nodeGraph",void 0),this.instanceSettings=e,this.timeSrv=t,this.nodeGraph=e.jsonData.nodeGraph}async metadataRequest(e,t){return(await(0,r.n)(this._request(e,t,{hideFromInspector:!0}))).data.data}query(e){const t=e.targets[0];if(!t)return(0,o.of)({data:[E]});if("search"!==t.queryType&&t.query)return this._request(`/api/traces/${encodeURIComponent(t.query)}`).pipe((0,i.U)((e=>{var t,a,n;const s=null==e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a[0];if(!s)return{data:[E]};let r=[(0,p.xM)(s)];return null!==(n=this.nodeGraph)&&void 0!==n&&n.enabled&&r.push(...h(s)),{data:r}})));if("upload"===t.queryType){if(!this.uploadedJson)return(0,o.of)({data:[]});try{var a;const e=JSON.parse(this.uploadedJson).data[0];let t=[(0,p.xM)(e)];return null!==(a=this.nodeGraph)&&void 0!==a&&a.enabled&&t.push(...h(e)),(0,o.of)({data:t})}catch(e){return(0,o.of)({error:{message:"JSON is not valid Jaeger format"},data:[]})}}let n=(0,s.pick)(t,["operation","service","tags","minDuration","maxDuration","limit"]);return n=(0,s.pickBy)(n,s.identity),n.tags&&(n=Object.assign({},n,{tags:b((0,c.getTemplateSrv)().replace(n.tags,e.scopedVars))})),"All"===n.operation&&(n=(0,s.omit)(n,"operation")),this._request("/api/traces",Object.assign({},n,this.getTimeRange(),{lookback:"custom"})).pipe((0,i.U)((e=>({data:[(0,p.Wp)(e.data.data,this.instanceSettings)]}))))}async testDatasource(){return(0,r.n)(this._request("/api/services").pipe((0,i.U)((e=>{var t;return((null==e||null===(t=e.data)||void 0===t?void 0:t.data)||[]).length>0?{status:"success",message:"Data source connected and services found."}:{status:"error",message:"Data source connected, but no services received. Verify that Jaeger is configured properly."}})),(0,l.K)((e=>{let t="Jaeger: ";return e.statusText?t+=e.statusText:t+="Cannot connect to Jaeger",e.status&&(t+=`. ${e.status}`),e.data&&e.data.message?t+=`. ${e.data.message}`:e.data&&(t+=`. ${JSON.stringify(e.data)}`),(0,o.of)({status:"error",message:t})}))))}getTimeRange(){const e=this.timeSrv.timeRange();return{start:z(e.from,!1),end:z(e.to,!0)}}getQueryDisplayText(e){return e.query||""}_request(e,t,a){const n=t?(0,d.tW)(t):"",s=`${this.instanceSettings.url}${e}${n.length?`?${n}`:""}`,r=Object.assign({},a,{url:s});return(0,c.getBackendSrv)().fetch(r)}}function z(e,t){return"string"==typeof e&&(e=n.dateMath.parse(e,t)),1e3*e.valueOf()}const E=new n.MutableDataFrame({fields:[{name:"trace",type:n.FieldType.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});var q=a("./public/app/core/components/NodeGraphSettings.tsx"),L=a("./public/app/core/components/TraceToLogsSettings.tsx");const k=new n.DataSourcePlugin(O).setConfigEditor((e=>{let{options:t,onOptionsChange:a}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.DataSourceHttpSettings,{defaultUrl:"http://localhost:16686",dataSourceConfig:t,showAccessOptions:!1,onChange:a}),(0,T.jsx)("div",{className:"gf-form-group",children:(0,T.jsx)(L.Z,{options:t,onOptionsChange:a})}),(0,T.jsx)("div",{className:"gf-form-group",children:(0,T.jsx)(q.n,{options:t,onOptionsChange:a})})]})})).setQueryEditor((function(e){var t;let{datasource:a,query:n,onChange:s,onRunQuery:r}=e;const o=(0,j.useTheme2)(),i=e=>{const t=Object.assign({},n,{query:e});s(t)};return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("div",{className:(0,y.css)({width:"100%"}),children:[(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Query type",children:(0,T.jsx)(j.RadioButtonGroup,{options:[{value:"search",label:"Search"},{value:void 0,label:"TraceID"},{value:"upload",label:"JSON file"}],value:n.queryType,onChange:e=>s(Object.assign({},n,{queryType:e})),size:"md"})})}),(()=>{switch(n.queryType){case"search":return t||(t=(0,T.jsx)(C,{datasource:a,query:n,onChange:s}));case"upload":return(0,T.jsx)("div",{className:(0,y.css)({padding:o.spacing(2)}),children:(0,T.jsx)(j.FileDropzone,{options:{multiple:!1},onLoad:e=>{a.uploadedJson=e,r()}})});default:return(0,T.jsx)(j.InlineFieldRow,{children:(0,T.jsx)(j.InlineField,{label:"Trace ID",labelWidth:14,grow:!0,children:(0,T.jsx)(j.QueryField,{query:n.query,onChange:i,onRunQuery:r,onBlur:()=>{},placeholder:"Enter a Trace ID (run with Shift+Enter)",portalOrigin:"jaeger"})})})}})()]})})}))},"./.yarn/__virtual__/react-transition-group-virtual-08a7713bd0/0/cache/react-transition-group-npm-4.4.1-5b62a122ef-0bcd8af483.zip/node_modules/react-transition-group/esm/CSSTransition.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a("./.yarn/cache/@babel-runtime-npm-7.15.4-52ce5bf6ea-c408254304.zip/node_modules/@babel/runtime/helpers/esm/extends.js"),s=a("./.yarn/cache/@babel-runtime-npm-7.15.4-52ce5bf6ea-c408254304.zip/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),r=a("./.yarn/cache/@babel-runtime-npm-7.15.4-52ce5bf6ea-c408254304.zip/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),o=(a("./.yarn/cache/prop-types-npm-15.7.2-d7a04f2274-5eef82fdda.zip/node_modules/prop-types/index.js"),a("./.yarn/cache/dom-helpers-npm-5.2.1-b38bb4470b-863ba9e086.zip/node_modules/dom-helpers/esm/addClass.js")),i=a("./.yarn/cache/dom-helpers-npm-5.2.1-b38bb4470b-863ba9e086.zip/node_modules/dom-helpers/esm/removeClass.js"),l=a("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),c=a("./.yarn/__virtual__/react-transition-group-virtual-08a7713bd0/0/cache/react-transition-group-npm-4.4.1-5b62a122ef-0bcd8af483.zip/node_modules/react-transition-group/esm/Transition.js"),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.Z)(e,t)}))},u=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,a){var n=t.resolveArguments(e,a),s=n[0],r=n[1];t.removeClasses(s,"exit"),t.addClass(s,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,a)},t.onEntering=function(e,a){var n=t.resolveArguments(e,a),s=n[0],r=n[1]?"appear":"enter";t.addClass(s,r,"active"),t.props.onEntering&&t.props.onEntering(e,a)},t.onEntered=function(e,a){var n=t.resolveArguments(e,a),s=n[0],r=n[1]?"appear":"enter";t.removeClasses(s,r),t.addClass(s,r,"done"),t.props.onEntered&&t.props.onEntered(e,a)},t.onExit=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"appear"),t.removeClasses(a,"enter"),t.addClass(a,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var a=t.resolveArguments(e)[0];t.addClass(a,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"exit"),t.addClass(a,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,a){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,a]},t.getClassNames=function(e){var a=t.props.classNames,n="string"==typeof a,s=n?""+(n&&a?a+"-":"")+e:a[e];return{baseClassName:s,activeClassName:n?s+"-active":a[e+"Active"],doneClassName:n?s+"-done":a[e+"Done"]}},t}(0,r.Z)(t,e);var a=t.prototype;return a.addClass=function(e,t,a){var n=this.getClassNames(t)[a+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===a&&s&&(n+=" "+s),"active"===a&&e&&e.scrollTop,n&&(this.appliedClasses[t][a]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,o.Z)(e,t)}))}(e,n))},a.removeClasses=function(e,t){var a=this.appliedClasses[t],n=a.base,s=a.active,r=a.done;this.appliedClasses[t]={},n&&d(e,n),s&&d(e,s),r&&d(e,r)},a.render=function(){var e=this.props,t=(e.classNames,(0,s.Z)(e,["classNames"]));return l.createElement(c.ZP,(0,n.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);u.defaultProps={classNames:""},u.propTypes={};const p=u},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/body_parser.js":(e,t)=>{e.exports=function(e){return null==e&&(e={}),function(t,a,n){return t._body?n():t.header("content-type")===e.contentType?(t._body=!0,t.body=t.body||{},s="",t.setEncoding("utf8"),t.on("data",(function(e){return s+=e})),void t.on("end",(function(){try{var a=[];s.trim().split("\n").forEach((function(t){a.push(e.parser(t))})),t.body=a}catch(e){return e.body=s,e.status=400,n(e)}return n()}))):n();var s}}},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/body_parser_stream.js":(e,t,a)=>{a("./.yarn/cache/split-npm-0.2.10-a950dc8c82-9eb1195608.zip/node_modules/split/index.js"),a("./.yarn/cache/through-npm-2.3.8-df5f72a16e-a38c3e0598.zip/node_modules/through/index.js"),a("?7db0").Readable;var n=a("?7db0").PassThrough,s=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/logfmt.js");e.exports=function(e){null==e&&(e={});var t=e.contentType||"application/logplex-1";return function(e,a,r){return e._body?r():e.header("content-type")===t?(e._body=!0,e.body=new n({objectMode:!0}),e.pipe(s.streamParser()).pipe(e.body),r()):r()}}},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/logfmt_parser.js":(e,t)=>{t.debug=!1,t.parse=function(e){var a="",n="",s=!1,r=!1,o=!1,i=!1,l={},c=t.debug;"\n"==e[e.length-1]&&(e=e.slice(0,e.length-1));for(var d=0;d<=e.length;d++){if(" "==e[d]&&!o||d==e.length){if(s&&a.length>0?l[a]=!0:r&&("true"==n?n=!0:"false"==n?n=!1:""!==n||i||(n=null),l[a]=n,n=""),d==e.length)break;s=!1,r=!1,o=!1,i=!1}"="!=e[d]||o?"\\"==e[d]?(n+=e[++d],c&&console.log("escape: "+e[d])):'"'==e[d]?(i=!0,o=!o,c&&console.log("in quote: "+o)):" "==e[d]||r||s?s?(c&&console.log("add to key: "+e[d]),a+=e[d]):r&&(c&&console.log("add to value: "+e[d]),n+=e[d]):(c&&console.log("start key with: "+e[d]),s=!0,a=e[d]):(c&&console.log("split"),s=!1,r=!0)}return l}},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/logger.js":(e,t,a)=>{t.log=function(e,t){this.stream=this.stream||process.stdout,null==t&&(t=this.stream);var a=Object.assign({},this.defaultData,e);if(this.timers)for(var n in this.timers){var s=(new Date).getTime();a[n]=(s-this.timers[n]).toString()+"ms"}t.write(this.stringify(a)+"\n")},t.time=function(e){var t=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/logfmt.js"),n=(new Date).getTime(),s=(e=e||"elapsed",new t);return s.stream=this.stream,s.defaultData=this.defaultData,s.timers=Object.assign({},this.timers),s.timers[e]=n,s},t.namespace=function(e){var t=new(a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/logfmt.js")),n=Object.assign({},this.defaultData,e);return t.stream=this.stream,t.defaultData=n,t.timers=this.timers,t},t.error=function(e,t){this.maxErrorLines=this.maxErrorLines||10,void 0===t&&(t=Math.random().toString().slice(2,12));var a=this.namespace({error:!0,id:t,now:(new Date).toISOString()});if(a.log({message:e.message}),e.stack){var n=e.stack.split("\n");for(var s in n){if(s>=this.maxErrorLines)break;a.log({line:s,trace:n[s]})}}}},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/request_logger.js":(e,t)=>{var a=function(e,t){if("function"==typeof e.path)var a=e.path();else a=e.originalUrl||e.path||e.url;var n=e.header&&e.header("x-forwarded-for"),s=e.header&&e.header("x-request-id"),r={ip:e.ip||n||e.connection.remoteAddress,time:(new Date).toISOString(),method:e.method,path:a,status:t.statusCode};return s&&(r.request_id=s),t.get&&(r.content_length=t.get("content-length"),r.content_type=t.get("content-type")),r};t.init=function(e,t,n){return this.logger=e,n||t?n||("function"==typeof t?(n=t,t={}):n=a):(n=a,t={}),(t=t||{}).immediate?function(e,t,a){return function(t,n,s){var r=a(t,n);e.log(r),s()}}(e,0,n):function(e,t,a){return function(n,s,r){var o=t.elapsed||"elapsed",i=e.time(o),l=s.end;s.end=function(e,t){var r=a(n,s);s.end=l,s.end(e,t),i.log(r)},r()}}(e,t,n)},t.commonFormatter=a},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/streaming.js":(e,t,a)=>{var n=a("./.yarn/cache/split-npm-0.2.10-a950dc8c82-9eb1195608.zip/node_modules/split/index.js"),s=a("./.yarn/cache/through-npm-2.3.8-df5f72a16e-a38c3e0598.zip/node_modules/through/index.js"),r=a("?7db0").PassThrough;t.streamParser=function(e){var t=new r,a=this,o=s((function(e){""!==e&&this.queue(a.parse(e))}));return t.on("pipe",(function(e){e.unpipe&&e.unpipe(this),this.transformStream=e.pipe(n()).pipe(o)})),t.pipe=function(e,t){return this.transformStream.pipe(e,t)},t},t.streamStringify=function(e){var t=this;if((e=e||{}).hasOwnProperty("delimiter"))var a=e.delimiter;else a="\n";return s((function(e){this.queue(t.stringify(e)+a)}),(function(){this.queue(null)}))}},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/stringify.js":(e,t)=>{t.stringify=function(e){var t="";for(var a in e){var n=e[a],s=!1;null==n?(s=!0,n=""):n=n.toString();var r=n.indexOf(" ")>-1||n.indexOf("=")>-1;(n.indexOf('"')>-1||n.indexOf("\\")>-1)&&(n=n.replace(/["\\]/g,"\\$&")),r&&(n='"'+n+'"'),""!==n||s||(n='""'),t+=a+"="+n+" "}return t.substring(0,t.length-1)}},"./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/logfmt.js":(e,t,a)=>{function n(){}e.exports=n;var s=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/streaming.js"),r=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/body_parser.js"),o=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/body_parser_stream.js"),i=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/logfmt_parser.js"),l=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/logger.js"),c=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/request_logger.js"),d=a("./.yarn/cache/logfmt-npm-1.3.2-37fabee436-639d327c1e.zip/node_modules/logfmt/lib/stringify.js");Object.assign(n.prototype,l),Object.assign(n.prototype,s),n.prototype.stringify=d.stringify,n.prototype.parse=i.parse,n.prototype.bodyParser=function(e){e||(e={});var t=e.contentType||"application/logplex-1";return r({contentType:t,parser:this.parse})},n.prototype.bodyParserStream=function(e){e||(e={});var t=e.contentType||"application/logplex-1";return o({contentType:t})},n.prototype.requestLogger=function(e,t){return c.init(this,e,t)},n.prototype.requestLogger.commonFormatter=c.commonFormatter,Object.assign(n,n.prototype)},"./.yarn/cache/split-npm-0.2.10-a950dc8c82-9eb1195608.zip/node_modules/split/index.js":(e,t,a)=>{var n=a("./.yarn/cache/through-npm-2.3.8-df5f72a16e-a38c3e0598.zip/node_modules/through/index.js"),s=a("?1a5c").StringDecoder;e.exports=function(e,t){var a=new s,r="";"function"==typeof e&&(t=e,e=null);e||(e=/\r?\n/);function o(e,a){if(t){try{a=t(a)}catch(t){return e.emit("error",t)}void 0!==a&&e.queue(a)}else e.queue(a)}function i(t,a){var n=(r+a).split(e);r=n.pop();for(var s=0;s<n.length;s++){o(t,n[s])}}return n((function(e){i(this,a.write(e))}),(function(){a.end&&i(this,a.end()),null!=r&&o(this,r),this.queue(null)}))}},"./.yarn/cache/through-npm-2.3.8-df5f72a16e-a38c3e0598.zip/node_modules/through/index.js":(e,t,a)=>{var n=a("?dcf2");function s(e,t,a){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,r=!1,o=[],i=!1,l=new n;function c(){for(;o.length&&!l.paused;){var e=o.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function d(){l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy()}return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(a&&!1===a.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return i||(null===e&&(i=!0),o.push(e),c()),l},l.on("end",(function(){l.readable=!1,!l.writable&&l.autoDestroy&&process.nextTick((function(){l.destroy()}))})),l.end=function(e){if(!s)return s=!0,arguments.length&&l.write(e),d(),l},l.destroy=function(){if(!r)return r=!0,s=!0,o.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),c(),l.paused||l.emit("drain"),l},l}e.exports=s,s.through=s}}]);
//# sourceMappingURL=9848.07a78e2e5dfa22b54847.js.map