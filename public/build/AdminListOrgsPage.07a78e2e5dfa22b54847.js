"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3798],{"./public/app/features/admin/AdminListOrgsPage.tsx":(e,a,s)=>{s.r(a),s.d(a,{AdminListOrgsPages:()=>v,default:()=>_});var r,t,n,i,c=s("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),l=s("./public/app/core/selectors/navModel.ts"),d=s("./public/app/core/components/Page/Page.tsx"),o=s("./.yarn/__virtual__/react-redux-virtual-8e30c710ae/0/cache/react-redux-npm-7.2.5-cf7e365145-04ac4a4178.zip/node_modules/react-redux/es/index.js"),u=s("./packages/grafana-ui/src/index.ts"),h=s("./packages/grafana-runtime/src/index.ts"),p=s("./public/app/types/index.ts"),x=s("./public/app/core/core.ts"),m=s("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const g=e=>{let{orgs:a,onDelete:s}=e;const l=x.Vt.hasPermission(p.bW.OrgsDelete),[d,o]=(0,c.useState)();return(0,m.jsxs)("table",{className:"filter-table form-inline filter-table--hover",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[r||(r=(0,m.jsx)("th",{children:"ID"})),t||(t=(0,m.jsx)("th",{children:"Name"})),(0,m.jsx)("th",{style:{width:"1%"}})]})}),(0,m.jsx)("tbody",{children:a.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"link-td",children:(0,m.jsx)("a",{href:`admin/orgs/edit/${e.id}`,children:e.id})}),(0,m.jsx)("td",{className:"link-td",children:(0,m.jsx)("a",{href:`admin/orgs/edit/${e.id}`,children:e.name})}),(0,m.jsx)("td",{className:"text-right",children:(0,m.jsx)(u.Button,{variant:"destructive",size:"sm",icon:"times",onClick:()=>o(e),"aria-label":"Delete org",disabled:!l})})]},`${e.id}-${e.name}`)))}),d&&(0,m.jsx)(u.ConfirmModal,{isOpen:!0,icon:"trash-alt",title:"Delete",body:(0,m.jsxs)("div",{children:["Are you sure you want to delete '",d.name,"'?",n||(n=(0,m.jsx)("br",{}))," ",i||(i=(0,m.jsx)("small",{children:"All dashboards for this organization will be removed!"}))]}),confirmText:"Delete",onDismiss:()=>o(void 0),onConfirm:()=>{s(d.id),o(void 0)}})]})};var j,b=s("./.yarn/__virtual__/react-use-virtual-ca2705900f/0/cache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsyncFn.js"),f=s("./public/app/core/services/context_srv.ts");const v=()=>{const e=(0,o.useSelector)((e=>e.navIndex)),a=(0,l.h)(e,"global-orgs"),[s,r]=(0,b.default)((async()=>await(async()=>await(0,h.getBackendSrv)().get("/api/orgs"))()),[]),t=f.Vt.hasPermission(p.bW.OrgsCreate);return(0,c.useEffect)((()=>{r()}),[r]),(0,m.jsx)(d.Z,{navModel:a,children:(0,m.jsx)(d.Z.Contents,{children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"page-action-bar",children:[j||(j=(0,m.jsx)("div",{className:"page-action-bar__spacer"})),(0,m.jsx)(u.LinkButton,{icon:"plus",href:"org/new",disabled:!t,children:"New org"})]}),s.error&&(n=s.error,(null==n||null===(i=n.data)||void 0===i?void 0:i.message)||"An unexpected error happened."),s.loading&&"Fetching organizations",s.value&&(0,m.jsx)(g,{orgs:s.value,onDelete:e=>{(async e=>await(0,h.getBackendSrv)().delete("/api/orgs/"+e))(e).then((()=>r()))}})]})})});var n,i},_=v}}]);
//# sourceMappingURL=AdminListOrgsPage.07a78e2e5dfa22b54847.js.map