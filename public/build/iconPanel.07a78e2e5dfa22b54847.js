"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[53],{"./public/app/features/canvas/elements/icon.tsx":(e,t,i)=>{i.d(t,{e:()=>c});i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js");var o=i("./public/app/features/dimensions/index.ts"),a=i("./public/app/features/dimensions/editors/index.ts"),n=i("./.yarn/__virtual__/react-inlinesvg-virtual-f6307798ef/0/cache/react-inlinesvg-npm-2.3.0-9b0402e461-ea43f6ec06.zip/node_modules/react-inlinesvg/esm/index.js"),s=i("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/0/cache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=i("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),l=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const d=s.css`
  path {
    vector-effect: non-scaling-stroke;
  }
`;const c={id:"icon",name:"Icon",description:"SVG Icon display",display:function(e){const{width:t,height:i,data:o}=e;if(null==o||!o.path)return null;const a={fill:null==o?void 0:o.fill,stroke:null==o?void 0:o.strokeColor,strokeWidth:null==o?void 0:o.stroke};return(0,l.jsx)(n.Z,{src:o.path,width:t,height:i,style:a,className:a.strokeWidth?d:void 0})},getNewOptions:e=>Object.assign({placement:{width:50,height:50}},e,{config:{path:{mode:o.Q8.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:"#FFF899"}}}),prepareData:(e,t)=>{var i;let a;t.path&&(a=e.getResource(t.path).value()),a&&(0,r.isString)(a)||(a=(0,o.t7)("img/icons/unicons/question-circle.svg"));const n={path:a,fill:t.fill?e.getColor(t.fill).value():"#CCC"};var s;null!==(i=t.stroke)&&void 0!==i&&i.width&&t.stroke.color&&(t.stroke.width>0&&(n.stroke=null===(s=t.stroke)||void 0===s?void 0:s.width,n.strokeColor=e.getColor(t.stroke.color).value()));return n},registerOptionsUI:e=>{const t=["Icon"];e.addCustomEditor({category:t,id:"iconSelector",path:"config.path",name:"SVG Path",editor:a.Lv,settings:{resourceType:"icon"}}).addCustomEditor({category:t,id:"config.fill",path:"config.fill",name:"Fill color",editor:a.Lm,settings:{},defaultValue:{fixed:"grey"}}).addSliderInput({category:t,path:"config.stroke.width",name:"Stroke",defaultValue:0,settings:{min:0,max:10}}).addCustomEditor({category:t,id:"config.stroke.color",path:"config.stroke.color",name:"Stroke color",editor:a.Lm,settings:{},defaultValue:{fixed:"grey"},showIf:e=>{var t,i;return Boolean(null==e||null===(t=e.config)||void 0===t||null===(i=t.stroke)||void 0===i?void 0:i.width)}})}}},"./public/app/features/canvas/elements/notFound.tsx":(e,t,i)=>{i.d(t,{C:()=>r});var o,a=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),n=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");class s extends a.PureComponent{render(){const{config:e}=this.props;return(0,n.jsxs)("div",{children:[o||(o=(0,n.jsx)("h3",{children:"NOT FOUND:"})),(0,n.jsx)("pre",{children:JSON.stringify(e,null,2)})]})}}const r={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:s,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})}},"./public/app/features/canvas/index.ts":(e,t,i)=>{let o;i.d(t,{Uy:()=>o,Nm:()=>b,Jk:()=>x}),function(e){e.Original="original",e.Contain="contain",e.Cover="cover",e.Fill="fill",e.Tile="tile"}(o||(o={}));var a=i("./packages/grafana-data/src/index.ts"),n=i("./public/app/features/canvas/elements/icon.tsx"),s=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),r=i("./public/app/features/dimensions/editors/ColorDimensionEditor.tsx"),l=i("./public/app/features/dimensions/editors/TextDimensionEditor.tsx"),d=i("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/0/cache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=i("./packages/grafana-ui/src/index.ts"),h=i("./public/app/core/config.ts"),p=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");let u,g;!function(e){e.Left="left",e.Center="center",e.Right="right"}(u||(u={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(g||(g={}));class m extends s.PureComponent{render(){const{data:e}=this.props,t=f(h.vc.theme2,e);return(0,p.jsx)("div",{className:t.container,children:(0,p.jsx)("span",{className:t.span,children:null==e?void 0:e.text})})}}const f=(0,c.stylesFactory)(((e,t)=>({container:d.css`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,span:d.css`
    display: table-cell;
    vertical-align: ${t.valign};
    text-align: ${t.align};
    font-size: ${null==t?void 0:t.size}px;
    color: ${null==t?void 0:t.color};
  `}))),v={id:"text-box",name:"Text",description:"Text box",display:m,defaultSize:{width:240,height:160},getNewOptions:e=>Object.assign({background:{color:{fixed:"grey"}}},e,{config:{align:u.Left,valign:g.Middle}}),prepareData:(e,t)=>{var i,o;const a={text:t.text?e.getText(t.text).value():"",align:null!==(i=t.align)&&void 0!==i?i:u.Center,valign:null!==(o=t.valign)&&void 0!==o?o:g.Middle,size:t.size};return t.color&&(a.color=e.getColor(t.color).value()),a},registerOptionsUI:e=>{const t=["Text box"];e.addCustomEditor({category:t,id:"textSelector",path:"config.text",name:"Text",editor:l.$}).addCustomEditor({category:t,id:"config.color",path:"config.color",name:"Text color",editor:r.L,settings:{},defaultValue:{}}).addRadio({category:t,path:"config.align",name:"Align text",settings:{options:[{value:u.Left,label:"Left"},{value:u.Center,label:"Center"},{value:u.Right,label:"Right"}]},defaultValue:u.Left}).addRadio({category:t,path:"config.valign",name:"Vertical align",settings:{options:[{value:g.Top,label:"Top"},{value:g.Middle,label:"Middle"},{value:g.Bottom,label:"Bottom"}]},defaultValue:g.Middle}).addNumberInput({category:t,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},b=Object.assign({type:n.e.id},n.e.getNewOptions()),x=new a.Registry((()=>[n.e,v]))},"./public/app/features/canvas/runtime/element.tsx":(e,t,i)=>{i.d(t,{f:()=>l});i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js");var o=i("./public/app/features/canvas/index.ts"),a=i("./public/app/features/canvas/elements/notFound.tsx"),n=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let r=0;class l{constructor(e,t,i){var o,a;s(this,"UID",r++),s(this,"revId",0),s(this,"sizeStyle",{}),s(this,"dataStyle",{}),s(this,"div",void 0),s(this,"width",100),s(this,"height",100),s(this,"data",void 0),s(this,"anchor",void 0),s(this,"placement",void 0),s(this,"initElement",(e=>{this.div=e})),s(this,"applyDrag",(e=>{const{placement:t,anchor:i}=this,o=e.delta[0],a=e.delta[1],n=e.target.style;i.top&&(t.top+=a,n.top=`${t.top}px`),i.bottom&&(t.bottom-=a,n.bottom=`${t.bottom}px`),i.left&&(t.left+=o,n.left=`${t.left}px`),i.right&&(t.right-=o,n.right=`${t.right}px`)})),s(this,"applyResize",(e=>{const{placement:t,anchor:i}=this,o=e.target.style,a=e.delta[0],n=e.delta[1],s=e.direction[0],r=e.direction[1];1===s?i.right?(t.right-=a,o.right=`${t.right}px`,i.left||(t.width=e.width,o.width=`${t.width}px`)):(t.width=e.width,o.width=`${t.width}px`):-1===s&&(i.left?(t.left-=a,t.width=e.width,o.left=`${t.left}px`,o.width=`${t.width}px`):(t.width+=a,o.width=`${t.width}px`)),-1===r?i.top?(t.top-=n,t.height=e.height,o.top=`${t.top}px`,o.height=`${t.height}px`):(t.height=e.height,o.height=`${t.height}px`):1===r&&(i.bottom?(t.bottom-=n,t.height=e.height,o.bottom=`${t.bottom}px`,o.height=`${t.height}px`):(t.height=e.height,o.height=`${t.height}px`)),this.width=e.width,this.height=e.height})),this.item=e,this.options=t,this.parent=i,t||(this.options={type:e.id}),this.anchor=null!==(o=t.anchor)&&void 0!==o?o:{},this.placement=null!==(a=t.placement)&&void 0!==a?a:{},t.anchor=this.anchor,t.placement=this.placement}validatePlacement(){var e,t;const{anchor:i,placement:o}=this;i.left||i.right||(i.left=!0),i.top||i.bottom||(i.top=!0);const a=null!==(e=o.width)&&void 0!==e?e:100,n=null!==(t=o.height)&&void 0!==t?t:100;i.top?(o.top||(o.top=0),i.bottom?delete o.height:(o.height=n,delete o.bottom)):i.bottom&&(o.bottom||(o.bottom=0),o.height=n,delete o.top),i.left?(o.left||(o.left=0),i.right?delete o.width:(o.width=a,delete o.right)):i.right&&(o.right||(o.right=0),o.width=a,delete o.left),this.width=a,this.height=n,this.options.anchor=this.anchor,this.options.placement=this.placement}updateSize(e,t){this.width=e,this.height=t,this.validatePlacement(),this.sizeStyle=Object.assign({},this.options.placement,{position:"absolute"})}updateData(e){var t;this.item.prepareData&&(this.data=this.item.prepareData(e,this.options.config),this.revId++);const{background:i,border:a}=this.options,n={};if(i){if(i.color){const t=e.getColor(i.color);n.backgroundColor=t.value()}if(i.image){const a=e.getResource(i.image);if(a){const e=a.value();if(e)switch(n.backgroundImage=`url("${e}")`,null!==(t=i.size)&&void 0!==t?t:o.Uy.Contain){case o.Uy.Contain:n.backgroundSize="contain",n.backgroundRepeat="no-repeat";break;case o.Uy.Cover:n.backgroundSize="cover",n.backgroundRepeat="no-repeat";break;case o.Uy.Original:n.backgroundRepeat="no-repeat";break;case o.Uy.Tile:n.backgroundRepeat="repeat";break;case o.Uy.Fill:n.backgroundSize="100% 100%"}}}}if(a&&a.color&&a.width){const t=e.getColor(a.color);n.borderWidth=a.width,n.borderStyle="solid",n.borderColor=t.value(),n.backgroundImage&&(n.backgroundOrigin="padding-box")}this.dataStyle=n}visit(e){e(this)}onChange(e){var t;this.item.id!==e.type&&(this.item=null!==(t=o.Jk.getIfExists(e.type))&&void 0!==t?t:a.C);this.revId++,this.options=Object.assign({},e);let i=this.parent;for(;i;){if(i.isRoot()){i.scene.save();break}i.revId++,i=i.parent}}getSaveModel(){return Object.assign({},this.options)}render(){const{item:e}=this;return(0,n.jsx)("div",{style:Object.assign({},this.sizeStyle,this.dataStyle),ref:this.initElement,children:(0,n.jsx)(e.display,{config:this.options.config,width:this.width,height:this.height,data:this.data},`${this.UID}/${this.revId}`)},`${this.UID}`)}}},"./public/app/plugins/panel/canvas/editor/options.ts":(e,t,i)=>{i.d(t,{I:()=>n});var o=i("./public/app/features/canvas/index.ts"),a=i("./public/app/features/dimensions/editors/index.ts");const n={addBackground:(e,t)=>{const i=["Background"];e.addCustomEditor({category:i,id:"background.color",path:"background.color",name:"Color",editor:a.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:i,id:"background.image",path:"background.image",name:"Image",editor:a.Lv,settings:{resourceType:"image"}}).addRadio({category:i,path:"background.size",name:"Image size",settings:{options:[{value:o.Uy.Original,label:"Original"},{value:o.Uy.Contain,label:"Contain"},{value:o.Uy.Cover,label:"Cover"},{value:o.Uy.Fill,label:"Fill"},{value:o.Uy.Tile,label:"Tile"}]},defaultValue:o.Uy.Cover})},addBorder:(e,t)=>{var i,o;const n=["Border"];e.addSliderInput({category:n,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),null!==(i=t.options)&&void 0!==i&&null!==(o=i.border)&&void 0!==o&&o.width&&e.addCustomEditor({category:n,id:"border.color",path:"border.color",name:"Color",editor:a.Lm,settings:{},defaultValue:{fixed:""}})}}},"./public/app/plugins/panel/icon/module.tsx":(e,t,i)=>{i.r(t),i.d(t,{plugin:()=>u});var o=i("./packages/grafana-data/src/index.ts"),a=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),n=i("./public/app/features/canvas/runtime/element.tsx"),s=i("./public/app/features/canvas/elements/icon.tsx"),r=i("./public/app/features/dimensions/index.ts"),l=i("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends a.Component{constructor(e){super(e),d(this,"element",void 0),d(this,"initElement",(e=>(this.element=new n.f(s.e,e.options.root),this.updateSize(e),this.element.updateData(this.dims),this.element))),d(this,"updateSize",(e=>{const{width:t,height:i}=e;this.element.anchor={top:!0,left:!0},this.element.placement={left:0,top:0,width:t,height:i},this.element.updateSize(t,i)})),d(this,"dims",{getColor:e=>(0,r.FP)(this.props.data,e),getScale:e=>(0,r.pb)(this.props.data,e),getText:e=>(0,r.WO)(this.props.data,e),getResource:e=>(0,r.Qz)(this.props.data,e)}),this.element=this.initElement(e)}shouldComponentUpdate(e){var t,i;const{width:o,height:a,data:n}=this.props;let s=!1;return o===e.width&&a===e.height||(this.updateSize(e),s=!0),n!==e.data&&(this.element.updateData(this.dims),s=!0),(null===(t=this.props.options)||void 0===t?void 0:t.root)!==(null===(i=e.options)||void 0===i?void 0:i.root)&&(this.initElement(e),s=!0),s}render(){const{width:e,height:t}=this.props;return(0,l.jsx)("div",{style:{width:e,height:t,overflow:"hidden",position:"relative"},children:this.element.render()})}}const h={root:{config:{path:{mode:r.Q8.Fixed,fixed:"img/icons/unicons/analysis.svg"}}}};var p=i("./public/app/plugins/panel/canvas/editor/options.ts");const u=new o.PanelPlugin(c).setNoPadding().useFieldConfig().setPanelOptions((e=>{e.addNestedOptions({category:["Icon"],path:"root",build:(e,t)=>{s.e.registerOptionsUI(e,t),p.I.addBackground(e,t),p.I.addBorder(e,t)},defaultValue:h.root})}))}}]);
//# sourceMappingURL=iconPanel.07a78e2e5dfa22b54847.js.map