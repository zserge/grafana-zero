"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5295],{"./public/app/features/manage-dashboards/SnapshotListPage.tsx":(e,a,s)=>{s.r(a),s.d(a,{SnapshotListPage:()=>j,default:()=>f});var t,n,c,r=s("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),i=s("./.yarn/__virtual__/react-redux-virtual-8e30c710ae/0/cache/react-redux-npm-7.2.5-cf7e365145-04ac4a4178.zip/node_modules/react-redux/es/index.js"),d=s("./public/app/core/components/Page/Page.tsx"),l=s("./packages/grafana-ui/src/index.ts"),o=s("./packages/grafana-runtime/src/index.ts"),u=s("./.yarn/__virtual__/react-use-virtual-ca2705900f/0/cache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsync.js"),h=s("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const x=()=>{const[e,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(),d=o.locationService.getLocation().pathname,x=window.location.href,p=x.substr(0,x.indexOf(d));(0,u.Z)((async()=>{const e=await(0,o.getBackendSrv)().get("/api/dashboard/snapshots").then((e=>e.map((e=>Object.assign({},e,{url:`/dashboard/snapshot/${e.key}`})))));a(e)}),[a]);const m=(0,r.useCallback)((async s=>{const t=e.filter((e=>e.key!==s.key));a(t),await(0,o.getBackendSrv)().delete(`/api/snapshots/${s.key}`).catch((()=>{a(e)}))}),[e]);return(0,h.jsxs)("div",{children:[(0,h.jsxs)("table",{className:"filter-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[t||(t=(0,h.jsx)("th",{children:(0,h.jsx)("strong",{children:"Name"})})),n||(n=(0,h.jsx)("th",{children:(0,h.jsx)("strong",{children:"Snapshot url"})})),(0,h.jsx)("th",{style:{width:"70px"}}),(0,h.jsx)("th",{style:{width:"30px"}}),(0,h.jsx)("th",{style:{width:"25px"}})]})}),(0,h.jsx)("tbody",{children:e.map((e=>{const a=e.externalUrl||e.url,s=e.externalUrl||`${p}${e.url}`;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("a",{href:a,children:e.name})}),(0,h.jsx)("td",{children:(0,h.jsx)("a",{href:a,children:s})}),(0,h.jsx)("td",{children:e.external&&(c||(c=(0,h.jsx)("span",{className:"query-keyword",children:"External"})))}),(0,h.jsx)("td",{className:"text-center",children:(0,h.jsx)(l.LinkButton,{href:a,variant:"secondary",size:"sm",icon:"eye",children:"View"})}),(0,h.jsx)("td",{className:"text-right",children:(0,h.jsx)(l.Button,{variant:"destructive",size:"sm",icon:"times",onClick:()=>i(e)})})]},e.key)}))})]}),(0,h.jsx)(l.ConfirmModal,{isOpen:!!s,icon:"trash-alt",title:"Delete",body:`Are you sure you want to delete '${null==s?void 0:s.name}'?`,confirmText:"Delete",onDismiss:()=>i(void 0),onConfirm:()=>{m(s),i(void 0)}})]})};var p,m=s("./public/app/core/selectors/navModel.ts");const j=e=>{let{navModel:a,location:s}=e;return(0,h.jsx)(d.Z,{navModel:a,children:p||(p=(0,h.jsx)(d.Z.Contents,{children:(0,h.jsx)(x,{})}))})},f=(0,i.connect)((e=>({navModel:(0,m.h)(e.navIndex,"snapshots")})))(j)},"./.yarn/__virtual__/react-use-virtual-ca2705900f/0/cache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsync.js":(e,a,s)=>{var t=s("./.yarn/cache/tslib-npm-2.3.1-0e21e18015-de17a98d46.zip/node_modules/tslib/tslib.es6.js"),n=s("./.yarn/cache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),c=t.__importDefault(s("./.yarn/__virtual__/react-use-virtual-ca2705900f/0/cache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsyncFn.js"));a.Z=function(e,a){void 0===a&&(a=[]);var s=c.default(e,a,{loading:!0}),t=s[0],r=s[1];return n.useEffect((function(){r()}),[r]),t}}}]);
//# sourceMappingURL=SnapshotListPage.07a78e2e5dfa22b54847.js.map